{% extends 'base.html' %}

{% block content %}
<h2>Edit Queue {{queue.name}}</h2>
<div>
    <h4>Description:</h4>
    <p>{{queue.description}}</p>
</div>
{% if is_owner %}
<div class="owner-buttons">
    <a href="{% url 'gain_access' queue.secret queue.owner.secret %}"><button>Share</button></a></h3>
    {% if not queue.published %}
    <a href="{% url 'publish' queue.id %}"><button>Publish</button></a>
    {% elif not queue.synced %}
    <button>Sync (not yet implemented)</button>
    {% endif %}
    <a href="{% url 'delete_queue' queue.id %}"><button>Delete</button></a>
</div>
{% endif %}
<form id="searchForm" method="POST">
    {% csrf_token %}
    <span>
        <label for="searchQuery">Search:</label>
        <input type="text" id="searchQuery" name="searchQuery" value="{{recent_search}}">
    </span>
    <button id="searchButton" type="submit" class="btn btn-lg">Search</button>
</form>
<div>
    <ol>
        {% for entry in entries %}
        <li>
            <span>{{entry.title}}: {{entry.duration}} added by yet to be implemented
                {% if is_owner %}
                <a href="{% url 'delete_entry' queue_id=queue.id entry_id=entry.id %}"><button
                        class="btn btn-md">Remove</button></a>
                <div class="position-div">
                    <a href="{%url 'earlier' queue_id=queue.id entry_id=entry.id %}"><button>+</button></a>
                    <a href="{%url 'later' queue.id entry.id %}"><button>-</button></a>
                   <form action="{% url 'swap' queue.id entry.id %}" method="POST">
                        {% csrf_token %}
                        <input id="other_number-entry_{{entry.id}}" min="1" max="{{queue.length}}" name="other_number-entry_{{entry.id}}">
                        <label for="other_number-entry_{{entry.id}}">: Other Entry</label>
                        <button type="submit">Move</button>
                    </form>
                </div>
                {% endif %}
            </span>
        </li>
        {% endfor %}
    </ol>
</div>
<div>
    <h3>Search results for {{recent_search}}</h3>
    <ul>
        {% for result in search_results %}
        <li>
            {{result.title}}

            <a href="{% url 'add_entry' queue_id=queue.id video_id=result.id %}"><button

                    class="btn btn-md">Add</button></a>
        </li>
        {% endfor %}
    </ul>
</div>
{% if not is_guest %}
<a href="{% url 'profile' %}">Back to Profile</a>
{%else%}
Special sign up for Guest user.
{% endif %}
{% endblock content %}